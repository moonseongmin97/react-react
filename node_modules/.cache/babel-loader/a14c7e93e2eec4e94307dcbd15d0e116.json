{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\Desktop\\\\REACT\\\\68react\\\\src\\\\erp\\\\logistic\\\\transport\\\\page\\\\transportIn.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Button } from '@material-ui/core';\nimport MyGrid from 'util/LogiUtil/MyGrid';\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\"; //김승표\n\nfunction TransportIn(props) {\n  const [Searchvehicle, setSearchvehicleList] = useState();\n  const [list, setList] = useState([]);\n  const [grid, setGrid] = useState();\n  const [edit, setEdit] = useState(false);\n  const column = {\n    columnDefs: [{\n      headerName: '차량',\n      field: 'commercialVehicle'\n    }, {\n      headerName: '기사님',\n      field: 'driver'\n    }, {\n      headerName: '출차 상태',\n      field: 'transportStatus',\n      editable: true\n    }]\n  };\n\n  const setSearchvehicle = setSearchvehicleList => {\n    axios.get(\"http://localhost:8282/logi/transport/getCommercialVehicleInList\").then(({\n      data\n    }) => {\n      if (data.errorCode < 0) {\n        return Swal.fire({\n          icon: \"error\",\n          title: data.errorMsg\n        });\n      }\n\n      setSearchvehicleList(data.gridRowJson);\n    }).catch(e => {\n      Swal.fire({\n        icon: \"error\",\n        title: e\n      });\n    });\n  };\n\n  const api = params => {\n    setGrid(params.api);\n  };\n\n  const update = () => {\n    console.log('뭐야' + JSON.stringify(Searchvehicle));\n\n    for (var i = 0; i < Searchvehicle.length; i++) {\n      console.log('뭐야22222' + JSON.stringify(Searchvehicle[i]));\n      console.log('asios');\n      axios.post('http://localhost:8282/logi/transport/updateCarStatusReady', Searchvehicle[i]).then(response => {\n        console.log('성공1');\n        setList([]); //그냥 리렌더링할려고 억지로 list 건드려봄\n\n        setSearchvehicleList(response.data.gridRowJson);\n        console.log('성공2');\n      }).catch(e => {\n        console.log('실패' + e);\n        alert('실패');\n        return;\n      });\n    }\n\n    alert('완료 되었습니다');\n  };\n\n  useEffect(() => {\n    setSearchvehicle(setSearchvehicleList);\n  }, [list]);\n  return React.createElement(React.Fragment, null, React.createElement(MyGrid, {\n    column: column,\n    title: '입차 관리',\n    list: Searchvehicle,\n    rowData: list,\n    rowSelection: \"multiple\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    style: {\n      marginRight: '1vh'\n    },\n    onClick: update,\n    api: api,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"\\uC800\\uC7A5\")));\n}\n\nexport default TransportIn;","map":{"version":3,"sources":["C:/Users/USER/Desktop/REACT/68react/src/erp/logistic/transport/page/transportIn.js"],"names":["React","useEffect","useState","Button","MyGrid","axios","Swal","TransportIn","props","Searchvehicle","setSearchvehicleList","list","setList","grid","setGrid","edit","setEdit","column","columnDefs","headerName","field","editable","setSearchvehicle","get","then","data","errorCode","fire","icon","title","errorMsg","gridRowJson","catch","e","api","params","update","console","log","JSON","stringify","i","length","post","response","alert","marginRight"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Button } from '@material-ui/core';\r\nimport MyGrid from 'util/LogiUtil/MyGrid';\r\nimport axios from \"axios\";\r\nimport Swal from \"sweetalert2\";\r\n\r\n//김승표\r\nfunction TransportIn(props) {\r\n    \r\n    const [Searchvehicle, setSearchvehicleList] = useState();\r\n    const [list, setList] = useState([]);\r\n    const [grid, setGrid] = useState();\r\n    const [edit, setEdit] = useState(false);\r\n\r\n    const column = {\r\n        columnDefs: [\r\n            { headerName: '차량', field: 'commercialVehicle' },\r\n            { headerName: '기사님', field: 'driver' }, \r\n            { headerName: '출차 상태', field: 'transportStatus', editable: true},\r\n        ]\r\n    };\r\n\r\n    const setSearchvehicle = (setSearchvehicleList) => {\r\n  \r\n        axios.get(\"http://localhost:8282/logi/transport/getCommercialVehicleInList\").then(({data}) => {\r\n            if(data.errorCode < 0){\r\n                return Swal.fire({\r\n                    icon: \"error\",\r\n                    title: data.errorMsg\r\n                  });\r\n            }\r\n            setSearchvehicleList(data.gridRowJson);\r\n        }).catch(e => {\r\n            Swal.fire({\r\n                icon: \"error\",\r\n                title: e\r\n              });\r\n        });\r\n    }\r\n        const api = params => {\r\n        setGrid(params.api);\r\n    };\r\n\r\n    const update = () => {\r\n        console.log('뭐야'+JSON.stringify(Searchvehicle));\r\n        for (var i = 0; i < Searchvehicle.length; i++) {\r\n            console.log('뭐야22222'+JSON.stringify(Searchvehicle[i]));\r\n            console.log('asios');\r\n            axios.post('http://localhost:8282/logi/transport/updateCarStatusReady', Searchvehicle[i])\r\n            .then(response => {\r\n                console.log('성공1');\r\n                setList([]); //그냥 리렌더링할려고 억지로 list 건드려봄\r\n                setSearchvehicleList(response.data.gridRowJson);\r\n                console.log('성공2');\r\n            })\r\n            .catch(e => {\r\n                console.log('실패'+e);\r\n                alert('실패');\r\n                return;\r\n            });\r\n        }\r\n        alert('완료 되었습니다');\r\n    };\r\n\r\n    useEffect(() => {\r\n        setSearchvehicle(setSearchvehicleList);\r\n    }, [list]);\r\n\r\n    return (\r\n        <>\r\n            <MyGrid\r\n                column={column}\r\n                title={'입차 관리'}\r\n                list={Searchvehicle}\r\n                rowData={list}\r\n                rowSelection=\"multiple\"\r\n            >\r\n                <Button\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    style={{ marginRight: '1vh' }}\r\n                    onClick={update}\r\n                    api={api}\r\n                >\r\n                    저장\r\n                </Button>\r\n            </MyGrid>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default TransportIn;"]},"metadata":{},"sourceType":"module"}