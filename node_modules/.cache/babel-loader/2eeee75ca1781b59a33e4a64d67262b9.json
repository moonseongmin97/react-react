{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\Desktop\\\\68REACT\\\\68REACT\\\\68REACT\\\\src\\\\erp\\\\hr\\\\attendance\\\\page\\\\BonusRandomBox\\\\BounsRandomBoxComponent.js\";\n\n/* eslint-disable jsx-a11y/alt-text */\nimport React, { useRef, useState, useEffect } from 'react';\nimport axios from \"axios\";\n\nconst BonusRandomBoxComponent = () => {\n  const [empBonus, setEmpBonus] = useState({});\n  const box = useRef(null);\n  const resultBox = [{\n    result: '-50',\n    url: require('./img/-50퍼.png')\n  }, {\n    result: '-10',\n    url: require('./img/-10퍼.png')\n  }, {\n    result: '10',\n    url: require('./img/10퍼.png')\n  }, {\n    result: '50',\n    url: require('./img/50퍼.png')\n  }, {\n    result: '100',\n    url: require('./img/100퍼.png')\n  }, {\n    result: '150',\n    url: require('./img/150퍼.png')\n  }];\n  let check = true;\n\n  const openBox = () => {\n    if (!check) {\n      return;\n    }\n\n    check = false;\n\n    if (empBonus.bonus === undefined || empBonus.bonus === null) {\n      if (window.confirm('후회하지마세요')) {\n        setTimeout(() => {\n          box.current.src = require('./img/열상.png');\n          setTimeout(() => {\n            const i = Math.floor(Math.random() * resultBox.length);\n            box.current.src = resultBox[i].url;\n            insert(resultBox[i].result);\n            setTimeout(() => {\n              alert(`${resultBox[i].result}% 당첨되었습니다`);\n            }, 200);\n          }, 1200);\n        }, 700);\n      }\n    } else {\n      alert(`${empBonus.bonus}% 이번달 증가금이 있습니다.`);\n    }\n  }; /////////////////////////////////////////////////////////////////////\n\n\n  let nowDate = new Date();\n  const nowMonth = `${nowDate.getFullYear()}-${nowDate.getMonth() + 1}`;\n\n  const select = () => {\n    axios.get(\"http://localhost:8282/hr/salary/findterBonus.do\", {\n      params: {\n        empCode: sessionStorage.getItem(\"empCodeInfo_token\"),\n        applyYearMonth: nowMonth\n      }\n    }).then(({\n      data\n    }) => {\n      console.log(data.empBonus.empCode);\n      setEmpBonus({\n        empName: sessionStorage.getItem(\"empNameInfo_token\"),\n        empCode: data.empBonus.empCode,\n        applyYearMonth: data.empBonus.applyYearMonth,\n        bonus: data.empBonus.bonus\n      });\n    }).catch(e => {\n      setEmpBonus({\n        empName: sessionStorage.getItem(\"empNameInfo_token\"),\n        empCode: sessionStorage.getItem(\"empCodeInfo_token\"),\n        applyYearMonth: nowMonth,\n        bonus: null\n      });\n    });\n  };\n\n  const insert = result => {\n    axios.post(\"http://localhost:8282/hr/salary/registerBonus.do\", {\n      empName: sessionStorage.getItem(\"empNameInfo_token\"),\n      empCode: empBonus.empCode,\n      applyYearMonth: nowMonth,\n      bonus: result\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(() => {\n      select();\n    });\n  };\n\n  const del = () => {\n    axios.post(\"http://localhost:8282/hr/salary/removeAllBonus.do\").then(() => {\n      select();\n    });\n  };\n\n  useEffect(select, []);\n  return React.createElement(React.Fragment, null, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, empBonus.empName, \" \\uB2D8 \\uD658\\uC601\\uD569\\uB2C8\\uB2E4.\", empBonus.bonus ? `이번달 기본급에서 ${empBonus.bonus}% 증가 했습니다.` : '기회가 있습니다. 랜덤박스를 클릭하세요!'), React.createElement(\"button\", {\n    onClick: del,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, \"\\uCD08\\uAE30\\uD654\"), React.createElement(\"div\", {\n    style: {\n      \"display\": \"flex\",\n      \"align-items\": \"center\",\n      \"justify-content\": \"center\",\n      \"width\": \"100%\",\n      \"height\": \"70%\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    style: {\n      \"display\": \"flex\",\n      \"align-items\": \"center\",\n      \"justify-content\": \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: require('./img/닫상.png'),\n    onClick: openBox,\n    ref: box,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }))));\n};\n\nexport default BonusRandomBoxComponent;","map":{"version":3,"sources":["C:/Users/USER/Desktop/68REACT/68REACT/68REACT/src/erp/hr/attendance/page/BonusRandomBox/BounsRandomBoxComponent.js"],"names":["React","useRef","useState","useEffect","axios","BonusRandomBoxComponent","empBonus","setEmpBonus","box","resultBox","result","url","require","check","openBox","bonus","undefined","window","confirm","setTimeout","current","src","i","Math","floor","random","length","insert","alert","nowDate","Date","nowMonth","getFullYear","getMonth","select","get","params","empCode","sessionStorage","getItem","applyYearMonth","then","data","console","log","empName","catch","e","post","headers","del"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/alt-text */\nimport React,{useRef,useState,useEffect} from 'react';\nimport axios from \"axios\";\nconst BonusRandomBoxComponent = () => {\n    const [empBonus,setEmpBonus] = useState({});\n    const box = useRef(null);\n    const resultBox = [\n        {\n            result : '-50',\n            url :  require('./img/-50퍼.png')\n        },{\n            result : '-10',\n            url :  require('./img/-10퍼.png')\n        },{\n            result : '10',\n            url :  require('./img/10퍼.png')\n        },{\n            result : '50',\n            url :  require('./img/50퍼.png')\n        },{\n            result : '100',\n            url : require('./img/100퍼.png')\n        },{\n            result : '150',\n            url : require('./img/150퍼.png')\n        },\n    ]\n    let check = true;\n    const openBox = () => {\n        if(!check){\n            return;\n        }\n        check = false;\n        if(empBonus.bonus === undefined || empBonus.bonus === null ){\n            if(window.confirm('후회하지마세요')){\n                setTimeout(() => {\n                    box.current.src=require('./img/열상.png');\n                    setTimeout(() => {\n                        const i = Math.floor( Math.random() * resultBox.length )\n                        box.current.src=resultBox[i].url;\n                        insert(resultBox[i].result);\n                        setTimeout(() => {\n                            alert(`${resultBox[i].result}% 당첨되었습니다`)\n                        }, 200)\n                    }, 1200)\n                },700)\n            }\n        }else{\n            alert(`${empBonus.bonus}% 이번달 증가금이 있습니다.`)\n        }\n    }\n/////////////////////////////////////////////////////////////////////\n    let nowDate = new Date();\n    const nowMonth = `${nowDate.getFullYear()}-${nowDate.getMonth()+1}`;\n    \n\n    const select = () => {\n        axios.get(\n            \"http://localhost:8282/hr/salary/findterBonus.do\",\n            { params: {\n                empCode: sessionStorage.getItem(\"empCodeInfo_token\"),\n                applyYearMonth: nowMonth,\n            }}\n        ).then(({data}) => {\n            console.log(data.empBonus.empCode)\n            setEmpBonus({\n                empName : sessionStorage.getItem(\"empNameInfo_token\"),\n                empCode : data.empBonus.empCode,\n                applyYearMonth : data.empBonus.applyYearMonth,\n                bonus :data.empBonus.bonus\n            })\n         })\n        .catch(e => {\n            setEmpBonus({\n                empName : sessionStorage.getItem(\"empNameInfo_token\"),\n                empCode : sessionStorage.getItem(\"empCodeInfo_token\"),\n                applyYearMonth : nowMonth,\n                bonus :null\n            })\n        });\n    }\n\n    const insert = (result) => {\n        axios.post(\n            \"http://localhost:8282/hr/salary/registerBonus.do\",\n            {\n                empName : sessionStorage.getItem(\"empNameInfo_token\"),\n                empCode: empBonus.empCode,\n                applyYearMonth : nowMonth,\n                bonus : result\n            },\n            {\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            },\n        ).then(()=>{select()});\n    }\n    \n    const del = () => {\n        axios.post(\n            \"http://localhost:8282/hr/salary/removeAllBonus.do\",\n        ).then(()=>{select()});\n    }\n    useEffect(select, []);\n    return (\n        <>\n        <h2>\n        {empBonus.empName} 님 환영합니다. \n        {empBonus.bonus ?`이번달 기본급에서 ${empBonus.bonus}% 증가 했습니다.` : '기회가 있습니다. 랜덤박스를 클릭하세요!'}\n        </h2>\n        <button onClick={del}>초기화</button>\n        <div style={{\n            \"display\": \"flex\",\n            \"align-items\": \"center\",\n            \"justify-content\": \"center\" ,\n            \"width\":\"100%\",\n            \"height\":\"70%\",\n\n            }}>\n            <div>\n            </div>\n            <div style={\n                {\n                    \"display\": \"flex\",\n                    \"align-items\": \"center\",\n                    \"justify-content\": \"center\"  \n                }\n            }>\n                <img src={require('./img/닫상.png')} onClick={openBox} ref={box}/>\n            </div>\n        </div>\n        </>\n    )\n}\n\nexport default BonusRandomBoxComponent;"]},"metadata":{},"sourceType":"module"}