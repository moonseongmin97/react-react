{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\Desktop\\\\REACT\\\\68react\\\\src\\\\erp\\\\hr\\\\affair\\\\page\\\\EmpDetailed\\\\SimpleEmpSearch\\\\EmpDetailedSearch.js\";\n//**************************************** 2020-11-25 권은비 시작 ****************************************\nimport React, { useEffect, useState } from 'react';\nimport axios from \"axios\";\nimport UseStyles from \"erp/hr/util/UseStyles\";\nimport { Paper, AppBar, Tab } from \"@material-ui/core\";\nimport TabContext from \"@material-ui/lab/TabContext\";\nimport { TabList, TabPanel } from \"@material-ui/lab\";\nimport SearchByDept from './SearchByDept';\nimport SearchByEname from './SearchByEname';\nimport { useDispatch } from 'react-redux';\nimport { selectEmpDeailFullList } from 'erp/hr/affair/reducer/EmpDetailFullReducer';\n\nfunction EmpDetailedSearch(props) {\n  ////////탭관련 변수\n  const classes = UseStyles();\n  const [value, setValue] = React.useState(\"1\");\n\n  const handleTabChange = (event, newValue) => {\n    setValue(newValue);\n  }; //////////////////////SearchByDept,SearchByEname의 공통 변수/////////////////////\n\n\n  const dispatch = useDispatch();\n  const [deptName, setDeptName] = useState('전체부서');\n  const [empName, setEmpName] = useState('전체부서');\n  const [gridData, setGridData] = useState([]);\n  const [selEmpCode, setSelEmpCode] = useState('');\n  const [infoList, setInfoList] = useState([]);\n\n  const handleChange = event => {\n    setDeptName(event.target.value);\n  };\n\n  const handleChangeEname = event => {\n    setEmpName(event.target.value); // console.log(\"ddddddddddddddddd\"+empName);\n  }; ///////조건따라 목록조회(부서명,사원명)\n\n\n  const searchOnClick = async e => {\n    try {\n      await axios.get(`http://localhost:4000/erp/hr/codeList/${deptName}`).then(response => {\n        const jsonData = response.data.empCodeList;\n        console.log('다이알로그 값', jsonData);\n        setGridData(jsonData); // console.log(\"사업장조회\" + JSON.stringify(jsonData));\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const searchOnClickEname = async e => {\n    try {\n      await axios.get(`http://localhost:4000/erp/hr/codeList/${empName}`).then(response => {\n        const jsonData = response.data.empCodeList;\n        console.log('다이알로그 값', jsonData);\n        setGridData(jsonData); // console.log(\"사업장조회\" + JSON.stringify(jsonData));\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  }; //상세정보 조회할떄 empCode넘겨주기위해 dispatch\n\n\n  const onRowClicked = e => {\n    setSelEmpCode(e.data.empCode);\n    console.log(\"젭알 넘어와죠\" + selEmpCode);\n  };\n\n  useEffect(() => {\n    axios.get(\"http://localhost:8282/hr/affair/searchEmpBasicInfo\", {\n      params: {\n        empCode: selEmpCode\n      }\n    }).then(response => {\n      setInfoList(response.data.gridRowJson);\n      console.log(infoList);\n    }).catch(e => {\n      console.log(e);\n    });\n  }, [selEmpCode]);\n  useEffect(() => {\n    if (infoList[0] !== undefined) {\n      dispatch(selectEmpDeailFullList({\n        select: infoList\n      }));\n    }\n  }, [infoList]); ///////////////////////////////////////////////////////////////////////\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    className: classes.leftPaper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(TabContext, {\n    value: value,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, React.createElement(AppBar, {\n    position: \"static\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, React.createElement(TabList, {\n    onChange: handleTabChange,\n    scrollButtons: \"auto\" //aria-label=\"simple tabs example\"\n    //centered\n    ,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, React.createElement(Tab, {\n    label: \"\\uBD80\\uC11C\\uBA85 \\uAC80\\uC0C9\",\n    value: \"1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }), React.createElement(Tab, {\n    label: \"\\uC0AC\\uC6D0\\uBA85 \\uAC80\\uC0C9\",\n    value: \"2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }))), React.createElement(TabPanel, {\n    value: \"1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, React.createElement(SearchByDept, {\n    deptName: deptName,\n    gridData: gridData,\n    handleChange: handleChange,\n    searchOnClick: searchOnClick,\n    onRowClicked: onRowClicked,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  })), React.createElement(TabPanel, {\n    value: \"2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, React.createElement(SearchByEname, {\n    gridData: gridData,\n    handleChangeEname: handleChangeEname,\n    searchOnClickEname: searchOnClickEname,\n    onRowClicked: onRowClicked,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  })))));\n}\n\nexport default EmpDetailedSearch; //**************************************** 2020-11-25 권은비 종료 ****************************************","map":{"version":3,"sources":["C:/Users/USER/Desktop/REACT/68react/src/erp/hr/affair/page/EmpDetailed/SimpleEmpSearch/EmpDetailedSearch.js"],"names":["React","useEffect","useState","axios","UseStyles","Paper","AppBar","Tab","TabContext","TabList","TabPanel","SearchByDept","SearchByEname","useDispatch","selectEmpDeailFullList","EmpDetailedSearch","props","classes","value","setValue","handleTabChange","event","newValue","dispatch","deptName","setDeptName","empName","setEmpName","gridData","setGridData","selEmpCode","setSelEmpCode","infoList","setInfoList","handleChange","target","handleChangeEname","searchOnClick","e","get","then","response","jsonData","data","empCodeList","console","log","searchOnClickEname","onRowClicked","empCode","params","gridRowJson","catch","undefined","select","leftPaper"],"mappings":"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","sourcesContent":["//**************************************** 2020-11-25 권은비 시작 ****************************************\nimport React,{useEffect,useState} from 'react';\nimport axios from \"axios\";\nimport UseStyles from \"erp/hr/util/UseStyles\";\nimport {\n    Paper,\n    AppBar,\n    Tab,\n} from \"@material-ui/core\";\nimport TabContext from \"@material-ui/lab/TabContext\";\nimport { TabList, TabPanel } from \"@material-ui/lab\";\n\nimport SearchByDept from './SearchByDept';\nimport SearchByEname from './SearchByEname';\nimport { useDispatch } from 'react-redux';\nimport {selectEmpDeailFullList} from 'erp/hr/affair/reducer/EmpDetailFullReducer';\n\n\nfunction EmpDetailedSearch(props) {\n\n    ////////탭관련 변수\n    const classes = UseStyles();\n    const [value, setValue] = React.useState(\"1\");\n\n    const handleTabChange = (event, newValue) => {\n    setValue(newValue);\n    };\n\n\n    //////////////////////SearchByDept,SearchByEname의 공통 변수/////////////////////\n    const dispatch = useDispatch();\n\n\n    const [deptName, setDeptName] = useState('전체부서');\n    const [empName, setEmpName] = useState('전체부서');\n    const [gridData,setGridData]=useState([]);\n    const [selEmpCode,setSelEmpCode] = useState('');\n    const [infoList,setInfoList] = useState([]);\n\n    const handleChange = (event) => {\n        setDeptName(event.target.value);\n\n    };\n\n    const handleChangeEname = (event) => {\n        setEmpName(event.target.value);\n       // console.log(\"ddddddddddddddddd\"+empName);\n    };\n\n    ///////조건따라 목록조회(부서명,사원명)\n\n        const searchOnClick = async e => {\n            try {\n                await axios.get(`http://localhost:4000/erp/hr/codeList/${deptName}`).then(response => {\n                    const jsonData = response.data.empCodeList;\n                    console.log('다이알로그 값', jsonData);\n                    setGridData(jsonData);\n                    // console.log(\"사업장조회\" + JSON.stringify(jsonData));\n                });\n            } catch (e) {\n                console.log(e);\n            }\n        };\n\n        const searchOnClickEname = async e => {\n            try {\n                await axios.get(`http://localhost:4000/erp/hr/codeList/${empName}`).then(response => {\n                    const jsonData = response.data.empCodeList;\n                    console.log('다이알로그 값', jsonData);\n                    setGridData(jsonData);\n                    // console.log(\"사업장조회\" + JSON.stringify(jsonData));\n                });\n            } catch (e) {\n                console.log(e);\n            }\n        };\n\n    //상세정보 조회할떄 empCode넘겨주기위해 dispatch\n    const onRowClicked=e=>{\n        setSelEmpCode(e.data.empCode);\n        console.log(\"젭알 넘어와죠\"+selEmpCode);\n    }\n\n    useEffect(\n        ()=>{\n        axios.get(\"http://localhost:8282/hr/affair/searchEmpBasicInfo\",{\n            params: { empCode:selEmpCode}\n        })\n        .then(response => {\n\n            setInfoList(response.data.gridRowJson); \n            console.log(infoList);\n        })   \n        .catch(e => {\n            console.log(e);\n    });\n        }\n    ,[selEmpCode]);\n\n    useEffect(() => {\n        if(infoList[0]!==undefined){\n        dispatch(selectEmpDeailFullList({select:infoList}));\n        }\n   }, [infoList]);\n\n\n    ///////////////////////////////////////////////////////////////////////\n\n    return (\n        <div>\n            \n                <Paper className={classes.leftPaper}>\n                    <TabContext value={value}>\n                        <AppBar position=\"static\">\n                            <TabList\n                                onChange={handleTabChange}\n                                scrollButtons=\"auto\"\n                            //aria-label=\"simple tabs example\"\n                            //centered\n                            >\n                                <Tab label=\"부서명 검색\" value=\"1\" />\n                                <Tab label=\"사원명 검색\" value=\"2\" />\n                            </TabList>\n                        </AppBar>\n                        <TabPanel value=\"1\">\n                            <SearchByDept\n                            deptName={deptName}\n                            gridData={gridData}\n                            handleChange={handleChange}\n                            searchOnClick={searchOnClick}\n                            onRowClicked={onRowClicked}\n                            />\n                        </TabPanel>\n                        <TabPanel value=\"2\">\n                            <SearchByEname \n                            gridData={gridData}\n                            handleChangeEname={handleChangeEname}\n                            searchOnClickEname={searchOnClickEname}\n                            onRowClicked={onRowClicked}/>\n                        </TabPanel>\n                    </TabContext>\n                </Paper>\n            \n        </div>\n    );\n}\n\nexport default EmpDetailedSearch;\n\n\n//**************************************** 2020-11-25 권은비 종료 ****************************************"]},"metadata":{},"sourceType":"module"}