{"ast":null,"code":"// https://youtu.be/IxydSMI4Qjg\n//************************* useAxios수정 시작 _준서 _20.08.24 *************************\nimport { useState, useEffect } from \"react\";\nimport defaultAxios from \"axios\";\nexport default function useAxios(options, axiosInstance = defaultAxios) {\n  console.log(\"Func_useAxios\");\n  console.log(options);\n  if (sessionStorage.getItem(\"authorization\")) axiosInstance.defaults.headers.common['Authorization'] = sessionStorage.getItem(\"authorization\");\n  const [state, setState] = useState({\n    url: options.url,\n    loading: options.fetchOnStart,\n    errorCode: 0,\n    errorMsg: \"\",\n    params: [options.params] //headers: options.headers\n\n  });\n\n  const fetchData = () => {\n    console.log(\"##########\");\n    if (!state.url) return;\n    axiosInstance(options).then(response => {\n      setState({ ...state,\n        loading: false,\n        data: response.data.restAttdList,\n        headers: response.headers\n      });\n      console.log(\"@@@@@@@@@\");\n    }).catch(error => {\n      setState({ ...state,\n        loading: false,\n        error: error\n      });\n    });\n  };\n\n  useEffect(fetchData, [state.loading]);\n\n  const fetch = (url = state.url, data = state.data) => {\n    console.log(\"&&&&&&&&&&&\");\n    setState({ ...state,\n      url: url,\n      loading: true,\n      data: data\n    });\n  };\n\n  console.log(\"state\");\n  console.log(state);\n  return { ...state,\n    fetch\n  };\n}\n; //************************* useAxios수정 종료 _준서 _20.08.24 *************************","map":{"version":3,"sources":["C:/Users/USER/Desktop/REACT/68REACT/src/util/useAxios.js"],"names":["useState","useEffect","defaultAxios","useAxios","options","axiosInstance","console","log","sessionStorage","getItem","defaults","headers","common","state","setState","url","loading","fetchOnStart","errorCode","errorMsg","params","fetchData","then","response","data","restAttdList","catch","error","fetch"],"mappings":"AAAA;AAEA;AACA,SAAQA,QAAR,EAAkBC,SAAlB,QAAkC,OAAlC;AACA,OAAOC,YAAP,MAAyB,OAAzB;AAEA,eAAe,SAASC,QAAT,CAAmBC,OAAnB,EAA4BC,aAAa,GAAGH,YAA5C,EAA2D;AACtEI,EAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAYH,OAAZ;AACA,MAAGI,cAAc,CAACC,OAAf,CAAuB,eAAvB,CAAH,EACIJ,aAAa,CAACK,QAAd,CAAuBC,OAAvB,CAA+BC,MAA/B,CAAsC,eAAtC,IAAyDJ,cAAc,CAACC,OAAf,CAAuB,eAAvB,CAAzD;AAEJ,QAAM,CAACI,KAAD,EAAQC,QAAR,IAAoBd,QAAQ,CAAC;AAC/Be,IAAAA,GAAG,EAAEX,OAAO,CAACW,GADkB;AAE/BC,IAAAA,OAAO,EAAEZ,OAAO,CAACa,YAFc;AAG/BC,IAAAA,SAAS,EAAE,CAHoB;AAI/BC,IAAAA,QAAQ,EAAE,EAJqB;AAK/BC,IAAAA,MAAM,EAAE,CAAChB,OAAO,CAACgB,MAAT,CALuB,CAM/B;;AAN+B,GAAD,CAAlC;;AASA,QAAMC,SAAS,GAAG,MAAM;AACpBf,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACA,QAAI,CAACM,KAAK,CAACE,GAAX,EACI;AAEJV,IAAAA,aAAa,CAACD,OAAD,CAAb,CAAuBkB,IAAvB,CAA4BC,QAAQ,IAAI;AACpCT,MAAAA,QAAQ,CAAC,EACL,GAAGD,KADE;AAELG,QAAAA,OAAO,EAAE,KAFJ;AAGLQ,QAAAA,IAAI,EAAED,QAAQ,CAACC,IAAT,CAAcC,YAHf;AAILd,QAAAA,OAAO,EAAEY,QAAQ,CAACZ;AAJb,OAAD,CAAR;AAMAL,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACH,KARD,EAQGmB,KARH,CAQSC,KAAK,IAAI;AACdb,MAAAA,QAAQ,CAAC,EAAC,GAAGD,KAAJ;AAAWG,QAAAA,OAAO,EAAE,KAApB;AAA2BW,QAAAA,KAAK,EAAEA;AAAlC,OAAD,CAAR;AACH,KAVD;AAWH,GAhBD;;AAiBA1B,EAAAA,SAAS,CAACoB,SAAD,EAAY,CAACR,KAAK,CAACG,OAAP,CAAZ,CAAT;;AAEA,QAAMY,KAAK,GAAG,CAACb,GAAG,GAAGF,KAAK,CAACE,GAAb,EAAkBS,IAAI,GAAGX,KAAK,CAACW,IAA/B,KAAwC;AAClDlB,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACAO,IAAAA,QAAQ,CAAC,EACL,GAAGD,KADE;AAELE,MAAAA,GAAG,EAAEA,GAFA;AAGLC,MAAAA,OAAO,EAAE,IAHJ;AAILQ,MAAAA,IAAI,EAAEA;AAJD,KAAD,CAAR;AAOH,GATD;;AAUAlB,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAYM,KAAZ;AACA,SAAO,EAAC,GAAGA,KAAJ;AAAWe,IAAAA;AAAX,GAAP;AACH;AAAA,C,CACD","sourcesContent":["// https://youtu.be/IxydSMI4Qjg\n\n//************************* useAxios수정 시작 _준서 _20.08.24 *************************\nimport {useState, useEffect} from \"react\";\nimport defaultAxios from \"axios\";\n\nexport default function useAxios (options, axiosInstance = defaultAxios)  {\n    console.log(\"Func_useAxios\");\n    console.log(options);\n    if(sessionStorage.getItem(\"authorization\"))\n        axiosInstance.defaults.headers.common['Authorization'] = sessionStorage.getItem(\"authorization\");\n        \n    const [state, setState] = useState({\n        url: options.url,\n        loading: options.fetchOnStart,\n        errorCode: 0,\n        errorMsg: \"\",\n        params: [options.params]\n        //headers: options.headers\n    });\n\n    const fetchData = () => {\n        console.log(\"##########\");\n        if (!state.url)\n            return;\n        \n        axiosInstance(options).then(response => {\n            setState({\n                ...state,\n                loading: false,\n                data: response.data.restAttdList,\n                headers: response.headers\n            });\n            console.log(\"@@@@@@@@@\");\n        }).catch(error => {\n            setState({...state, loading: false, error: error})\n        })\n    };\n    useEffect(fetchData, [state.loading]);\n\n    const fetch = (url = state.url, data = state.data) => {\n        console.log(\"&&&&&&&&&&&\");\n        setState({\n            ...state,\n            url: url,\n            loading: true,\n            data: data\n        });\n\n    };\n    console.log(\"state\");\n    console.log(state);\n    return {...state, fetch};\n};\n//************************* useAxios수정 종료 _준서 _20.08.24 *************************"]},"metadata":{},"sourceType":"module"}