{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\Desktop\\\\68REACT\\\\68REACT\\\\68REACT\\\\src\\\\util\\\\auth.js\";\n\n/* eslint-disable react-hooks/exhaustive-deps */\nimport Axios from 'axios';\nimport React, { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nexport default function (SpecificComponent, url) {\n  function AuthenticationCheck(props) {\n    const empAuthority = useSelector(({\n      Auth\n    }) => ({\n      empAuthority: Auth.empAuthority\n    }));\n\n    const authCheck = (empAuth, menuAuth) => {\n      for (var a = 0; a < empAuth.length; a++) {\n        for (var b = 0; b < menuAuth.length; b++) {\n          if (empAuth[a] === menuAuth[b]) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    };\n\n    useEffect(() => {\n      Axios.post('http://localhost:4000/erp/sys/menuAuth', {\n        url: url\n      }).then(response => {\n        if (response.data) {\n          console.log('empAuthority', empAuthority.empAuthority);\n          console.log('menuAuthority', response.data.menuAuthority);\n\n          if (!authCheck(empAuthority.empAuthority, response.data.menuAuthority)) {\n            alert('해당 메뉴에 대한 접근 권한이 없습니다.');\n            props.history.push('/');\n          }\n        } else {\n          alert('메뉴 이동에 실패했습니다');\n        }\n      });\n    }, []);\n    return React.createElement(SpecificComponent, Object.assign({}, props, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36\n      },\n      __self: this\n    }));\n  }\n\n  return AuthenticationCheck;\n}","map":{"version":3,"sources":["C:/Users/USER/Desktop/68REACT/68REACT/68REACT/src/util/auth.js"],"names":["Axios","React","useEffect","useSelector","SpecificComponent","url","AuthenticationCheck","props","empAuthority","Auth","authCheck","empAuth","menuAuth","a","length","b","post","then","response","data","console","log","menuAuthority","alert","history","push"],"mappings":";;AAAA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,WAAT,QAA4B,aAA5B;AAEA,eAAe,UAASC,iBAAT,EAA4BC,GAA5B,EAAiC;AAC5C,WAASC,mBAAT,CAA6BC,KAA7B,EAAoC;AAChC,UAAMC,YAAY,GAAGL,WAAW,CAAC,CAAC;AAAEM,MAAAA;AAAF,KAAD,MAAe;AAAED,MAAAA,YAAY,EAAEC,IAAI,CAACD;AAArB,KAAf,CAAD,CAAhC;;AAEA,UAAME,SAAS,GAAG,CAACC,OAAD,EAAUC,QAAV,KAAuB;AACrC,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,OAAO,CAACG,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACrC,aAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,QAAQ,CAACE,MAA7B,EAAqCC,CAAC,EAAtC,EAA0C;AACtC,cAAIJ,OAAO,CAACE,CAAD,CAAP,KAAeD,QAAQ,CAACG,CAAD,CAA3B,EAAgC;AAC5B,mBAAO,IAAP;AACH;AACJ;AACJ;;AACD,aAAO,KAAP;AACH,KATD;;AAWAb,IAAAA,SAAS,CAAC,MAAM;AACZF,MAAAA,KAAK,CAACgB,IAAN,CAAW,wCAAX,EAAqD;AAAEX,QAAAA,GAAG,EAAEA;AAAP,OAArD,EAAmEY,IAAnE,CAAwEC,QAAQ,IAAI;AAChF,YAAIA,QAAQ,CAACC,IAAb,EAAmB;AACfC,UAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4Bb,YAAY,CAACA,YAAzC;AACAY,UAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BH,QAAQ,CAACC,IAAT,CAAcG,aAA3C;;AACA,cAAI,CAACZ,SAAS,CAACF,YAAY,CAACA,YAAd,EAA4BU,QAAQ,CAACC,IAAT,CAAcG,aAA1C,CAAd,EAAwE;AACpEC,YAAAA,KAAK,CAAC,wBAAD,CAAL;AACAhB,YAAAA,KAAK,CAACiB,OAAN,CAAcC,IAAd,CAAmB,GAAnB;AACH;AACJ,SAPD,MAOO;AACHF,UAAAA,KAAK,CAAC,eAAD,CAAL;AACH;AACJ,OAXD;AAYH,KAbQ,EAaN,EAbM,CAAT;AAeA,WAAO,oBAAC,iBAAD,oBAAuBhB,KAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAP;AACH;;AACD,SAAOD,mBAAP;AACH","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport Axios from 'axios';\nimport React, { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\n\nexport default function(SpecificComponent, url) {\n    function AuthenticationCheck(props) {\n        const empAuthority = useSelector(({ Auth }) => ({ empAuthority: Auth.empAuthority }));\n\n        const authCheck = (empAuth, menuAuth) => {\n            for (var a = 0; a < empAuth.length; a++) {\n                for (var b = 0; b < menuAuth.length; b++) {\n                    if (empAuth[a] === menuAuth[b]) {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        };\n\n        useEffect(() => {\n            Axios.post('http://localhost:4000/erp/sys/menuAuth', { url: url }).then(response => {\n                if (response.data) {\n                    console.log('empAuthority', empAuthority.empAuthority);\n                    console.log('menuAuthority', response.data.menuAuthority);\n                    if (!authCheck(empAuthority.empAuthority, response.data.menuAuthority)) {\n                        alert('해당 메뉴에 대한 접근 권한이 없습니다.');\n                        props.history.push('/');\n                    }\n                } else {\n                    alert('메뉴 이동에 실패했습니다');\n                }\n            });\n        }, []);\n\n        return <SpecificComponent {...props} />;\n    }\n    return AuthenticationCheck;\n}\n"]},"metadata":{},"sourceType":"module"}