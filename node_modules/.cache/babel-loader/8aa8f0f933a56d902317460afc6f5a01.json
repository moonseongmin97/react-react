{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lyn\\\\Desktop\\\\68REACT\\\\68REACT\\\\68REACT\\\\src\\\\erp\\\\account\\\\account\\\\page\\\\NonCurrentAsset\\\\NonCurrentAssetDetail.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { TextField, Button, AppBar, Typography, Toolbar, MenuItem, Paper } from \"@material-ui/core\";\nimport { useDispatch } from \"react-redux\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport useStyles1 from \"erp/account/account/page/Slip/Theme\";\nimport OpenMonthAmortizationDialog from \"./Dialog/OpenMonthAmortizationDialog\";\nimport { SAVE_NON_CURRENT_START } from \"../../reducer/AccountReducer\";\n/*##################################### 2020-11-20납품현황 박민호 #######################################*/\n\nconst NonCurrentAssetDetail = props => {\n  const [acquistionCost, setAcquistionCost] = useState(\"\");\n  const [depreciation, setDepreciation] = useState(\"\");\n  const [bookValue, setBookValue] = useState(\"\");\n  const [amortizationWay, setAmortizationWay] = useState(\"\");\n  const [amortizationFinalYear, setAmortizationFinalYear] = useState(\"\");\n  const [usefulLife, setUsefulLife] = useState(\"\");\n  const [amortizationRate, setAmortizationRate] = useState(\"\");\n  const [month, setMonth] = useState(\"\");\n  const [normalAmortization, setNormalAmortization] = useState(\"\");\n  const [RAccumulatedAmortization, setRAccumulatedAmortization] = useState(\"\");\n  const [accumulatedAmortization, setAccumulatedAmortization] = useState(\"\");\n  const [bookValueEnd, setBookValueEnd] = useState(\"\");\n  const [open1, setOpen1] = useState(\"\");\n  const dispatch = useDispatch();\n  const theme = useStyles1();\n  var [openMonthAmoriztionDialog, setOpenMonthAmoriztionDialog] = useState(false);\n  const currencies = [{\n    value: \"정액법\",\n    label: \"정액법\"\n  }, {\n    value: \"정률법\",\n    label: \"정률법\"\n  }];\n  const classes = useStyles();\n\n  const onChange1 = e => {\n    setAmortizationWay(e.target.value);\n\n    if (e.target.value === \"정률법\") {\n      setAmortizationRate(Math.ceil((1 - Math.pow(0.05, 1 / usefulLife)) * 1000) / 1000);\n      setNormalAmortization(bookValue * amortizationRate);\n    } else if (e.target.value === \"정액법\") {\n      setAmortizationRate(Math.ceil(1 / usefulLife * 1000) / 1000);\n      console.log(amortizationRate, \"::::\", acquistionCost);\n      setNormalAmortization(acquistionCost * amortizationRate);\n    }\n  };\n\n  const onSubmit = e => {\n    //등록\n    let gridRow = props.nonCurrentAsst[0];\n\n    if (gridRow === undefined) {\n      alert(\"그리드 선택바랍니다\");\n      return;\n    }\n\n    let NonCAassetCode = gridRow.assetCode;\n\n    if (acquistionCost !== \"\" && depreciation !== \"\" && bookValue !== \"\" && amortizationWay !== \"\" && amortizationFinalYear !== \"\" && usefulLife !== \"\" && amortizationRate !== \"\" && month !== \"\" && normalAmortization !== \"\") {\n      let newData = {\n        acquistionCost: acquistionCost,\n        depreciation: depreciation,\n        bookValue: bookValue,\n        amortizationWay: amortizationWay,\n        amortizationFinalYear: amortizationFinalYear,\n        usefulLife: usefulLife,\n        amortizationRate: amortizationRate,\n        month: month,\n        normalAmortization: normalAmortization,\n        RAccumulatedAmortization: RAccumulatedAmortization,\n        accumulatedAmortization: accumulatedAmortization,\n        bookValueEnd: bookValueEnd\n      };\n\n      if (NonCAassetCode === \"자동생성\") {\n        gridRow.currentAssetDetailBean = newData;\n        gridRow.checkStatus = \"insert\"; //등록\n\n        dispatch({\n          type: SAVE_NON_CURRENT_START,\n          params: gridRow\n        });\n        alert(\"등록 되었습니다\");\n        return;\n      } else if (NonCAassetCode !== \"자동생성\") {\n        gridRow.currentAssetDetailBean = newData;\n        gridRow.checkStatus = \"update\"; //수정\n\n        dispatch({\n          type: SAVE_NON_CURRENT_START,\n          params: gridRow\n        });\n        alert(\"수정 되었습니다\");\n      }\n    } else {\n      alert(\"빈칸기입 바랍니다\");\n    }\n  };\n\n  useEffect(() => {\n    setBookValue(acquistionCost - depreciation);\n\n    if (amortizationWay === \"정률법\") {\n      //정률법계산\n      setAmortizationRate(Math.ceil((1 - Math.pow(0.05, 1 / usefulLife)) * 1000) / 1000);\n      setNormalAmortization(Math.ceil(bookValue * amortizationRate));\n      setAccumulatedAmortization(parseInt(depreciation) + parseInt(normalAmortization));\n      setBookValueEnd(bookValue - normalAmortization);\n    } else if (amortizationWay === \"정액법\") {\n      //정액법 계산\n      setAmortizationRate(Math.ceil(1 / usefulLife * 1000) / 1000);\n      setNormalAmortization(Math.ceil(acquistionCost * amortizationRate));\n      setAccumulatedAmortization(parseInt(depreciation) + parseInt(normalAmortization));\n      setBookValueEnd(bookValue - normalAmortization);\n    }\n\n    setMonth(\"12\");\n    setRAccumulatedAmortization(\"0\");\n    setOpen1(normalAmortization); //월상각내역 담음\n  }, [usefulLife, acquistionCost, amortizationRate, amortizationWay, bookValue, accumulatedAmortization, depreciation, bookValueEnd, normalAmortization]);\n  useEffect(() => {\n    let gridRow = props.nonCurrentAsst[0];\n\n    if (gridRow !== undefined) {\n      console.log(gridRow.currentAssetDetailBean);\n\n      if (gridRow.currentAssetDetailBean !== undefined) {\n        // 조회 했을시 디테일 뿌려주기위함.\n        if (gridRow.currentAssetDetailBean[0] !== undefined) {\n          //등록시 undefind 방지\n          setAcquistionCost(gridRow.currentAssetDetailBean[0].acquistionCost);\n          setDepreciation(gridRow.currentAssetDetailBean[0].depreciation);\n          setBookValue(gridRow.currentAssetDetailBean[0].bookValue);\n          setAmortizationWay(gridRow.currentAssetDetailBean[0].amortizationWay);\n          setAmortizationFinalYear(gridRow.currentAssetDetailBean[0].amortizationFinalYear);\n          setUsefulLife(gridRow.currentAssetDetailBean[0].usefulLife);\n          setAmortizationRate(gridRow.currentAssetDetailBean[0].amortizationRate);\n          setMonth(gridRow.currentAssetDetailBean[0].month);\n          setNormalAmortization(gridRow.currentAssetDetailBean[0].normalAmortization);\n          setRAccumulatedAmortization(gridRow.currentAssetDetailBean[0].RAccumulatedAmortization);\n          setAccumulatedAmortization(gridRow.currentAssetDetailBean[0].accumulatedAmortization);\n          setBookValueEnd(gridRow.currentAssetDetailBean[0].bookValueEnd);\n        }\n      } else if (gridRow.currentAssetDetailBean === undefined) {\n        if (gridRow.progress === \"\" || gridRow.assetName === \"\") {\n          //고정자산 상세 초기화\n          setAcquistionCost(\"\");\n          setDepreciation(\"\");\n          setBookValue(\"\");\n          setAmortizationWay(\"\");\n          setAmortizationFinalYear(\"\");\n          setUsefulLife(\"\");\n          setAmortizationRate(\"\");\n          setMonth(\"\");\n          setNormalAmortization(\"\");\n          setRAccumulatedAmortization(\"\");\n          setAccumulatedAmortization(\"\");\n          setBookValueEnd(\"\");\n        }\n      }\n    }\n  }, [props.nonCurrentAsst]);\n  useEffect(() => {\n    let gridRow = props.nonCurrentAsst[0];\n\n    if (gridRow !== undefined) {\n      if (gridRow.progress !== \"\" || gridRow.assetName === \"\") {\n        //상각 완료 년도 기입\n        setAmortizationFinalYear(parseInt(gridRow.progress.substring(0, 4)) + parseInt(usefulLife));\n      }\n    }\n  }, [usefulLife]);\n  useEffect(() => {}, []);\n\n  const openDialog = () => {\n    setOpenMonthAmoriztionDialog(true);\n  };\n\n  const closeDialog = () => {\n    setOpenMonthAmoriztionDialog(false);\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(OpenMonthAmortizationDialog, {\n    open: openMonthAmoriztionDialog,\n    value: open1,\n    close: closeDialog,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: theme.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238\n    },\n    __self: this\n  }, React.createElement(AppBar, {\n    color: \"primary\",\n    position: \"static\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239\n    },\n    __self: this\n  }, React.createElement(Toolbar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    variant: \"h4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241\n    },\n    __self: this\n  }, \"\\uACE0\\uC815\\uC790\\uC0B0 \\uC0C1\\uC138\"), React.createElement(Typography, {\n    variant: \"h6\",\n    className: theme.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242\n    },\n    __self: this\n  }), React.createElement(Button, {\n    className: theme.menuButton,\n    variant: \"contained\",\n    color: \"secondary\",\n    onClick: onSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243\n    },\n    __self: this\n  }, \"\\uB4F1\\uB85D\"), React.createElement(Button, {\n    className: theme.menuButton,\n    variant: \"contained\",\n    color: \"secondary\",\n    onClick: openDialog,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251\n    },\n    __self: this\n  }, \"\\uC6D4\\uC0C1\\uAC01\\uB0B4\\uC5ED\")))), React.createElement(Paper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    className: classes.root,\n    noValidate: true,\n    autoComplete: \"off\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    className: classes.TextField,\n    id: \"acquistionCost\",\n    label: \"\\uCDE8\\uB4DD\\uC6D0\\uAC00\",\n    value: acquistionCost,\n    onChange: e => {\n      setAcquistionCost(e.target.value);\n    },\n    disabled: props.visibleState,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    className: classes.TextField,\n    id: \"depreciation\",\n    label: \"\\uC804\\uAE30\\uB9D0\\uC0C1\\uAC01\\uB204\\uACC4\\uC561\",\n    value: depreciation,\n    onChange: e => {\n      setDepreciation(e.target.value);\n    },\n    disabled: props.visibleState,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    className: classes.TextField,\n    disabled: true,\n    id: \"bookValue\",\n    label: \"\\uC804\\uAE30\\uB9D0\\uC7A5\\uBD80\\uAC00\\uC561\",\n    variant: \"filled\",\n    value: bookValue,\n    onChange: e => {\n      setBookValue(acquistionCost - depreciation);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284\n    },\n    __self: this\n  })), React.createElement(\"form\", {\n    className: classes.root,\n    noValidate: true,\n    autoComplete: \"off\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    className: classes.TextField,\n    id: \"amortizationWay\",\n    select: true,\n    label: \"\\uC0C1\\uAC01\\uBC29\\uBC95\",\n    value: amortizationWay,\n    onChange: onChange1,\n    disabled: props.visibleState,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297\n    },\n    __self: this\n  }, currencies.map(option => React.createElement(MenuItem, {\n    key: option.value,\n    value: option.value,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307\n    },\n    __self: this\n  }, option.label))), React.createElement(TextField, {\n    className: classes.TextField,\n    disabled: true,\n    id: \"amortizationFinalYear\",\n    label: \"\\uC0C1\\uAC01\\uC644\\uB8CC\\uB144\\uB3C4\",\n    variant: \"filled\",\n    value: amortizationFinalYear,\n    onChange: e => {\n      setAmortizationFinalYear(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312\n    },\n    __self: this\n  })), React.createElement(\"form\", {\n    className: classes.root,\n    noValidate: true,\n    autoComplete: \"off\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    className: classes.TextField,\n    id: \"UsefulLife\",\n    label: \"\\uB0B4\\uC6A9\\uC5F0\\uC218\",\n    value: usefulLife,\n    onChange: e => {\n      setUsefulLife(e.target.value);\n    },\n    disabled: props.visibleState,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    className: classes.TextField,\n    disabled: true,\n    id: \"amortizationRate\",\n    label: \"\\uC0C1\\uAC01\\uB960\",\n    variant: \"filled\",\n    value: amortizationRate,\n    onChange: e => {\n      setAmortizationRate(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    className: classes.TextField,\n    disabled: true,\n    id: \"month\",\n    label: \"\\uC6D4\\uC218\",\n    value: \"12\",\n    variant: \"filled\",\n    onChange: e => {\n      setMonth(\"e.target.value\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346\n    },\n    __self: this\n  })), React.createElement(\"form\", {\n    className: classes.root,\n    noValidate: true,\n    autoComplete: \"off\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    className: classes.TextField,\n    id: \"normalAmortization\",\n    disabled: true,\n    label: \"\\uC77C\\uBC18\\uC0C1\\uAC01\\uBE44\",\n    defaultValue: normalAmortization,\n    value: normalAmortization,\n    onChange: e => {\n      setNormalAmortization(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    className: classes.TextField,\n    disabled: true,\n    id: \"RAccumulatedAmortization\",\n    label: \"\\uC804\\uAE30\\uB9D0\\uC0C1\\uAC01\\uB204\\uACC4\\uC561\\uAC10\\uC18C\",\n    variant: \"filled\",\n    onChange: e => {\n      setRAccumulatedAmortization(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    className: classes.TextField,\n    disabled: true,\n    id: \"accumulatedAmortization\",\n    label: \"\\uB2F9\\uAE30\\uB9D0\\uC0C1\\uAC01\\uB204\\uACC4\\uC561\",\n    variant: \"filled\",\n    value: accumulatedAmortization,\n    onChange: e => {\n      setAccumulatedAmortization(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    className: classes.TextField,\n    disabled: true,\n    id: \"bookValueEnd\",\n    label: \"\\uB2F9\\uAE30\\uB9D0\\uC7A5\\uBD80\\uAC00\\uC561\",\n    variant: \"filled\",\n    value: bookValueEnd,\n    onChange: e => {\n      setBookValueEnd(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 391\n    },\n    __self: this\n  }))));\n};\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    height: \"11vh\",\n    //margin: theme.spacing(1),\n    //width: \"25ch\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"flex-start\"\n  },\n  title: {\n    flexGrow: 1\n  },\n  TextField: {\n    margin: theme.spacing(1),\n    width: \"25ch\"\n  }\n}));\nexport default NonCurrentAssetDetail;","map":{"version":3,"sources":["C:/Users/Lyn/Desktop/68REACT/68REACT/68REACT/src/erp/account/account/page/NonCurrentAsset/NonCurrentAssetDetail.js"],"names":["React","useEffect","useState","TextField","Button","AppBar","Typography","Toolbar","MenuItem","Paper","useDispatch","makeStyles","useStyles1","OpenMonthAmortizationDialog","SAVE_NON_CURRENT_START","NonCurrentAssetDetail","props","acquistionCost","setAcquistionCost","depreciation","setDepreciation","bookValue","setBookValue","amortizationWay","setAmortizationWay","amortizationFinalYear","setAmortizationFinalYear","usefulLife","setUsefulLife","amortizationRate","setAmortizationRate","month","setMonth","normalAmortization","setNormalAmortization","RAccumulatedAmortization","setRAccumulatedAmortization","accumulatedAmortization","setAccumulatedAmortization","bookValueEnd","setBookValueEnd","open1","setOpen1","dispatch","theme","openMonthAmoriztionDialog","setOpenMonthAmoriztionDialog","currencies","value","label","classes","useStyles","onChange1","e","target","Math","ceil","pow","console","log","onSubmit","gridRow","nonCurrentAsst","undefined","alert","NonCAassetCode","assetCode","newData","currentAssetDetailBean","checkStatus","type","params","parseInt","progress","assetName","substring","openDialog","closeDialog","root","title","menuButton","visibleState","map","option","height","display","alignItems","justifyContent","flexGrow","margin","spacing","width"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport {\n  TextField,\n  Button,\n  AppBar,\n  Typography,\n  Toolbar,\n  MenuItem,\n  Paper,\n} from \"@material-ui/core\";\nimport { useDispatch } from \"react-redux\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport useStyles1 from \"erp/account/account/page/Slip/Theme\";\nimport OpenMonthAmortizationDialog from \"./Dialog/OpenMonthAmortizationDialog\";\nimport { SAVE_NON_CURRENT_START } from \"../../reducer/AccountReducer\";\n/*##################################### 2020-11-20납품현황 박민호 #######################################*/\nconst NonCurrentAssetDetail = props => {\n  const [acquistionCost, setAcquistionCost] = useState(\"\");\n  const [depreciation, setDepreciation] = useState(\"\");\n  const [bookValue, setBookValue] = useState(\"\");\n  const [amortizationWay, setAmortizationWay] = useState(\"\");\n  const [amortizationFinalYear, setAmortizationFinalYear] = useState(\"\");\n  const [usefulLife, setUsefulLife] = useState(\"\");\n  const [amortizationRate, setAmortizationRate] = useState(\"\");\n  const [month, setMonth] = useState(\"\");\n  const [normalAmortization, setNormalAmortization] = useState(\"\");\n  const [RAccumulatedAmortization, setRAccumulatedAmortization] = useState(\"\");\n  const [accumulatedAmortization, setAccumulatedAmortization] = useState(\"\");\n  const [bookValueEnd, setBookValueEnd] = useState(\"\");\n  const [open1, setOpen1] = useState(\"\");\n  const dispatch = useDispatch();\n  const theme = useStyles1();\n  var [openMonthAmoriztionDialog, setOpenMonthAmoriztionDialog] = useState(\n    false,\n  );\n\n  const currencies = [\n    {\n      value: \"정액법\",\n      label: \"정액법\",\n    },\n    {\n      value: \"정률법\",\n      label: \"정률법\",\n    },\n  ];\n\n  const classes = useStyles();\n\n  const onChange1 = e => {\n    setAmortizationWay(e.target.value);\n    if (e.target.value === \"정률법\") {\n      setAmortizationRate(\n        Math.ceil((1 - Math.pow(0.05, 1 / usefulLife)) * 1000) / 1000,\n      );\n      setNormalAmortization(bookValue * amortizationRate);\n    } else if (e.target.value === \"정액법\") {\n      setAmortizationRate(Math.ceil((1 / usefulLife) * 1000) / 1000);\n      console.log(amortizationRate, \"::::\", acquistionCost);\n      setNormalAmortization(acquistionCost * amortizationRate);\n    }\n  };\n\n  const onSubmit = e => {\n    //등록\n    let gridRow = props.nonCurrentAsst[0];\n    if (gridRow === undefined) {\n      alert(\"그리드 선택바랍니다\");\n      return;\n    }\n    let NonCAassetCode = gridRow.assetCode;\n    if (\n      acquistionCost !== \"\" &&\n      depreciation !== \"\" &&\n      bookValue !== \"\" &&\n      amortizationWay !== \"\" &&\n      amortizationFinalYear !== \"\" &&\n      usefulLife !== \"\" &&\n      amortizationRate !== \"\" &&\n      month !== \"\" &&\n      normalAmortization !== \"\"\n    ) {\n      let newData = {\n        acquistionCost: acquistionCost,\n        depreciation: depreciation,\n        bookValue: bookValue,\n        amortizationWay: amortizationWay,\n        amortizationFinalYear: amortizationFinalYear,\n        usefulLife: usefulLife,\n        amortizationRate: amortizationRate,\n        month: month,\n        normalAmortization: normalAmortization,\n        RAccumulatedAmortization: RAccumulatedAmortization,\n        accumulatedAmortization: accumulatedAmortization,\n        bookValueEnd: bookValueEnd,\n      };\n      if (NonCAassetCode === \"자동생성\") {\n        gridRow.currentAssetDetailBean = newData;\n        gridRow.checkStatus = \"insert\"; //등록\n        dispatch({\n          type: SAVE_NON_CURRENT_START,\n          params: gridRow,\n        });\n        alert(\"등록 되었습니다\");\n        return;\n      } else if (NonCAassetCode !== \"자동생성\") {\n        gridRow.currentAssetDetailBean = newData;\n        gridRow.checkStatus = \"update\"; //수정\n        dispatch({\n          type: SAVE_NON_CURRENT_START,\n          params: gridRow,\n        });\n        alert(\"수정 되었습니다\");\n      }\n    } else {\n      alert(\"빈칸기입 바랍니다\");\n    }\n  };\n\n  useEffect(() => {\n    setBookValue(acquistionCost - depreciation);\n    if (amortizationWay === \"정률법\") {\n      //정률법계산\n\n      setAmortizationRate(\n        Math.ceil((1 - Math.pow(0.05, 1 / usefulLife)) * 1000) / 1000,\n      );\n      setNormalAmortization(Math.ceil(bookValue * amortizationRate));\n      setAccumulatedAmortization(\n        parseInt(depreciation) + parseInt(normalAmortization),\n      );\n      setBookValueEnd(bookValue - normalAmortization);\n    } else if (amortizationWay === \"정액법\") {\n      //정액법 계산\n\n      setAmortizationRate(Math.ceil((1 / usefulLife) * 1000) / 1000);\n      setNormalAmortization(Math.ceil(acquistionCost * amortizationRate));\n      setAccumulatedAmortization(\n        parseInt(depreciation) + parseInt(normalAmortization),\n      );\n      setBookValueEnd(bookValue - normalAmortization);\n    }\n    setMonth(\"12\");\n    setRAccumulatedAmortization(\"0\");\n    setOpen1(normalAmortization); //월상각내역 담음\n  }, [\n    usefulLife,\n    acquistionCost,\n    amortizationRate,\n    amortizationWay,\n    bookValue,\n    accumulatedAmortization,\n    depreciation,\n    bookValueEnd,\n    normalAmortization,\n  ]);\n\n  useEffect(() => {\n    let gridRow = props.nonCurrentAsst[0];\n    if (gridRow !== undefined) {\n      console.log(gridRow.currentAssetDetailBean);\n      if (gridRow.currentAssetDetailBean !== undefined) {\n        // 조회 했을시 디테일 뿌려주기위함.\n        if (gridRow.currentAssetDetailBean[0] !== undefined) {\n          //등록시 undefind 방지\n          setAcquistionCost(gridRow.currentAssetDetailBean[0].acquistionCost);\n          setDepreciation(gridRow.currentAssetDetailBean[0].depreciation);\n          setBookValue(gridRow.currentAssetDetailBean[0].bookValue);\n          setAmortizationWay(gridRow.currentAssetDetailBean[0].amortizationWay);\n          setAmortizationFinalYear(\n            gridRow.currentAssetDetailBean[0].amortizationFinalYear,\n          );\n          setUsefulLife(gridRow.currentAssetDetailBean[0].usefulLife);\n          setAmortizationRate(\n            gridRow.currentAssetDetailBean[0].amortizationRate,\n          );\n          setMonth(gridRow.currentAssetDetailBean[0].month);\n          setNormalAmortization(\n            gridRow.currentAssetDetailBean[0].normalAmortization,\n          );\n          setRAccumulatedAmortization(\n            gridRow.currentAssetDetailBean[0].RAccumulatedAmortization,\n          );\n          setAccumulatedAmortization(\n            gridRow.currentAssetDetailBean[0].accumulatedAmortization,\n          );\n          setBookValueEnd(gridRow.currentAssetDetailBean[0].bookValueEnd);\n        }\n      } else if (gridRow.currentAssetDetailBean === undefined) {\n        if (gridRow.progress === \"\" || gridRow.assetName === \"\") {\n          //고정자산 상세 초기화\n          setAcquistionCost(\"\");\n          setDepreciation(\"\");\n          setBookValue(\"\");\n          setAmortizationWay(\"\");\n          setAmortizationFinalYear(\"\");\n          setUsefulLife(\"\");\n          setAmortizationRate(\"\");\n          setMonth(\"\");\n          setNormalAmortization(\"\");\n          setRAccumulatedAmortization(\"\");\n          setAccumulatedAmortization(\"\");\n          setBookValueEnd(\"\");\n        }\n      }\n    }\n  }, [props.nonCurrentAsst]);\n\n  useEffect(() => {\n    let gridRow = props.nonCurrentAsst[0];\n    if (gridRow !== undefined) {\n      if (gridRow.progress !== \"\" || gridRow.assetName === \"\") {\n        //상각 완료 년도 기입\n\n        setAmortizationFinalYear(\n          parseInt(gridRow.progress.substring(0, 4)) + parseInt(usefulLife),\n        );\n      }\n    }\n  }, [usefulLife]);\n\n  useEffect(() => {}, []);\n  const openDialog = () => {\n    setOpenMonthAmoriztionDialog(true);\n  };\n\n  const closeDialog = () => {\n    setOpenMonthAmoriztionDialog(false);\n  };\n\n  return (\n    <>\n      <OpenMonthAmortizationDialog\n        open={openMonthAmoriztionDialog}\n        value={open1}\n        close={closeDialog}\n      />\n      <div className={theme.root}>\n        <AppBar color=\"primary\" position=\"static\">\n          <Toolbar>\n            <Typography variant=\"h4\">고정자산 상세</Typography>\n            <Typography variant=\"h6\" className={theme.title}></Typography>\n            <Button\n              className={theme.menuButton}\n              variant=\"contained\"\n              color=\"secondary\"\n              onClick={onSubmit}\n            >\n              등록\n            </Button>\n            <Button\n              className={theme.menuButton}\n              variant=\"contained\"\n              color=\"secondary\"\n              onClick={openDialog}\n            >\n              월상각내역\n            </Button>\n          </Toolbar>\n        </AppBar>\n      </div>\n      <Paper>\n        <form className={classes.root} noValidate autoComplete=\"off\">\n          <TextField\n            className={classes.TextField}\n            id=\"acquistionCost\"\n            label=\"취득원가\"\n            value={acquistionCost}\n            onChange={e => {\n              setAcquistionCost(e.target.value);\n            }}\n            disabled={props.visibleState}\n          />\n          <TextField\n            className={classes.TextField}\n            id=\"depreciation\"\n            label=\"전기말상각누계액\"\n            value={depreciation}\n            onChange={e => {\n              setDepreciation(e.target.value);\n            }}\n            disabled={props.visibleState}\n          />\n          <TextField\n            className={classes.TextField}\n            disabled\n            id=\"bookValue\"\n            label=\"전기말장부가액\"\n            variant=\"filled\"\n            value={bookValue}\n            onChange={e => {\n              setBookValue(acquistionCost - depreciation);\n            }}\n          />\n        </form>\n        <form className={classes.root} noValidate autoComplete=\"off\">\n          <TextField\n            className={classes.TextField}\n            id=\"amortizationWay\"\n            select\n            label=\"상각방법\"\n            value={amortizationWay}\n            onChange={onChange1}\n            disabled={props.visibleState}\n          >\n            {currencies.map(option => (\n              <MenuItem key={option.value} value={option.value}>\n                {option.label}\n              </MenuItem>\n            ))}\n          </TextField>\n          <TextField\n            className={classes.TextField}\n            disabled\n            id=\"amortizationFinalYear\"\n            label=\"상각완료년도\"\n            variant=\"filled\"\n            value={amortizationFinalYear}\n            onChange={e => {\n              setAmortizationFinalYear(e.target.value);\n            }}\n          />\n        </form>\n        <form className={classes.root} noValidate autoComplete=\"off\">\n          <TextField\n            className={classes.TextField}\n            id=\"UsefulLife\"\n            label=\"내용연수\"\n            value={usefulLife}\n            onChange={e => {\n              setUsefulLife(e.target.value);\n            }}\n            disabled={props.visibleState}\n          />\n          <TextField\n            className={classes.TextField}\n            disabled\n            id=\"amortizationRate\"\n            label=\"상각률\"\n            variant=\"filled\"\n            value={amortizationRate}\n            onChange={e => {\n              setAmortizationRate(e.target.value);\n            }}\n          />\n          <TextField\n            className={classes.TextField}\n            disabled\n            id=\"month\"\n            label=\"월수\"\n            value={\"12\"}\n            variant=\"filled\"\n            onChange={e => {\n              setMonth(\"e.target.value\");\n            }}\n          />\n        </form>\n        <form className={classes.root} noValidate autoComplete=\"off\">\n          <TextField\n            className={classes.TextField}\n            id=\"normalAmortization\"\n            disabled\n            label=\"일반상각비\"\n            defaultValue={normalAmortization}\n            value={normalAmortization}\n            onChange={e => {\n              setNormalAmortization(e.target.value);\n            }}\n          />\n          <TextField\n            className={classes.TextField}\n            disabled\n            id=\"RAccumulatedAmortization\"\n            label=\"전기말상각누계액감소\"\n            variant=\"filled\"\n            onChange={e => {\n              setRAccumulatedAmortization(e.target.value);\n            }}\n          />\n          <TextField\n            className={classes.TextField}\n            disabled\n            id=\"accumulatedAmortization\"\n            label=\"당기말상각누계액\"\n            variant=\"filled\"\n            value={accumulatedAmortization}\n            onChange={e => {\n              setAccumulatedAmortization(e.target.value);\n            }}\n          />\n          <TextField\n            className={classes.TextField}\n            disabled\n            id=\"bookValueEnd\"\n            label=\"당기말장부가액\"\n            variant=\"filled\"\n            value={bookValueEnd}\n            onChange={e => {\n              setBookValueEnd(e.target.value);\n            }}\n          />\n        </form>\n      </Paper>\n    </>\n  );\n};\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    height: \"11vh\",\n    //margin: theme.spacing(1),\n    //width: \"25ch\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"flex-start\",\n  },\n  title: {\n    flexGrow: 1,\n  },\n  TextField: {\n    margin: theme.spacing(1),\n    width: \"25ch\",\n  },\n}));\n\nexport default NonCurrentAssetDetail;\n"]},"metadata":{},"sourceType":"module"}