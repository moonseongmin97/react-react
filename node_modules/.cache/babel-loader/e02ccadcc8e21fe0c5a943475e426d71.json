{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lyn\\\\Desktop\\\\68REACT\\\\68REACT\\\\68REACT\\\\src\\\\erp\\\\account\\\\base\\\\page\\\\WorkplaceManagement\\\\FinanceAccount.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { AgGridReact } from \"ag-grid-react\";\nimport useStyles from \"erp/account/statement/page/AccountLedger/Theme\"; //ê³„ì •ë³„ì›ì¥ì—ì„œ css ë•¡ê²¨ì”€\n\nimport axios from \"axios\";\nimport { useDispatch } from \"react-redux\";\nimport * as types from \"../../reducer/BaseReducer\";\nimport ThreeSixtyIcon from \"@material-ui/icons/ThreeSixty\";\nimport DeleteOutlinedIcon from \"@material-ui/icons/DeleteOutlined\";\nimport Icon from \"@material-ui/core/Icon\";\nimport { Button } from \"@material-ui/core\";\nimport { useThemeSwitcher } from \"mui-theme-switcher\"; //=============================== 2020-09-01 ê±°ë˜ì²˜ê´€ë¦¬ ì¡°í¸ë°± ======================================\n\nconst FinanceAccount = () => {\n  const classes = useStyles(); //ìŠ¤íƒ€ì¼ì ìš©\n\n  const [data, setData] = useState(null); //useEffect ë¡œ ì¡°íšŒí•œ ê²°ê³¼ê°’ ë°›ëŠ” ìƒíƒœ ê°’\n\n  const [positionGridApi, setPositionGridApi] = useState(null); // ë°”ë€ŒëŠ” ìƒíƒœ ê°’ì„ ê´€ë¦¬í•¨\n\n  const dispatch = useDispatch(); //Redux ì €ì¥ì†Œì—ì„œ ìˆëŠ” í•¨ìˆ˜ë¥¼ ë°ë¦¬ê³ ì˜´\n  //===================== useEffectë¡œ ë¹„ë™ê¸°ì ìœ¼ë¡œ ë™ì‘  ====================\n  //ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ ëì„ ë•Œ í˜¸ì¶œë¨\n\n  useEffect(() => {\n    NormalAccountList(); // í•¨ìˆ˜í˜¸ì¶œ\n  }, []);\n\n  function NormalAccountList() {\n    axios.get(\"http://localhost:8282/acc/base/getCustomerList\").then(response => {\n      setData(response.data);\n    }).catch(e => {\n      console.log(e);\n    });\n  } //=============================== ag_grid ì‹œì‘ ======================================\n\n\n  const FinanceAccountGrid = [// ì¹¼ëŸ¼ì •ì˜\n  {\n    checkboxSelection: true,\n    rowSelection: \"multiple\",\n    rowMultiSelectWithClick: true,\n    width: \"80\"\n  }, {\n    headerName: \"ê¸ˆìœµ ê±°ë˜ì²˜ì½”ë“œ\",\n    field: \"customerCode\",\n    sortable: true\n  }, // sortable ì»¬ëŸ¼ëˆŒëŸ¬ì„œ ì˜¤ë¦„ì°¨ìˆœë‚´ë¦¼ì°¨ìˆœ ê°€ëŠ¥\n  {\n    headerName: \"ì‚¬ì—…ì¥ì½”ë“œ\",\n    field: \"workplaceCode\",\n    editable: true\n  }, {\n    headerName: \"ê¸ˆìœµê¸°ê´€ì½”ë“œ\",\n    field: \"financiaLInstituteCode\",\n    editable: true\n  }, {\n    headerName: \"ê¸ˆìœµê¸°ê´€ëª…\",\n    field: \"financialInstituteName\",\n    editable: true\n  }, {\n    headerName: \"ê¸ˆìœµê±°ë˜ì²˜ëª…\",\n    field: \"customerName\",\n    editable: true\n  }, {\n    headerName: \"ê³„ì¢Œë²ˆí˜¸\",\n    field: \"accountNumber\",\n    editable: true\n  }, {\n    headerName: \"ìœ í˜•\",\n    field: \"customerType\",\n    editable: true\n  }, {\n    headerName: \"ìƒíƒœ\",\n    field: \"status\",\n    hide: true\n  }];\n  /* \n     customerCode; ê±°ë˜ì²˜ì½”ë“œ /  workplaceCode; ì‚¬ì—…ì¥ì½”ë“œ /  customerName; ê±°ë˜ì²˜ëª… /  customerType; ê±°ë˜ì²˜ìœ í˜• /  customerCeo; ëŒ€í‘œì /  businessLicenseNumber; ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸\n     / socialSecurityNumber; ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸ / customerBusinessConditions; ì—…íƒœ / customerBusinessItems; ì¢…ëª© / customerZipCode; ê±°ë˜ì²˜ìš°í¸ë²ˆí˜¸ / customerBasicAddress; ê±°ë˜ì²˜ê¸°ë³¸ì£¼ì†Œ\n     customerDetailAddress; ê±°ë˜ì²˜ì„¸ë¶€ì£¼ì†Œ / customerTelNumber; ê±°ë˜ì²˜ì „í™”ë²ˆí˜¸ / customerFaxNumber; ê±°ë˜ì²˜íŒ©ìŠ¤ë²ˆí˜¸ / customerNote; ë¹„ê³  / accountNumber; ê³„ì¢Œë²ˆí˜¸ /  cardNumber; ì¹´ë“œë²ˆí˜¸\n     cardType; ì¹´ë“œêµ¬ë¶„ / cardMemberName; ì¹´ë“œíšŒì›ëª… / cardOpenPlace; ì¹´ë“œê°€ë§¹ì ë²ˆí˜¸ / financialInstituteCode; ê¸ˆìœµê¸°ê´€ì½”ë“œ / financialInstituteName; ê¸ˆìœµê¸°ê´€ëª…\n     */\n  //=================================================== ag Grid ì´ˆê¸°í™” ì‹œ ì‹¤í–‰ =========================================\n\n  const onGridReady = params => {\n    setPositionGridApi(params.api); //ì¶”ê°€ ìˆ˜ì • ì‚­ì œ ë²„íŠ¼ëˆ„ë¥¼ë•Œ ê·¸ë¦¬ë“œ ê°’ ì‚¬ìš©í•˜ë ¤ê³  í• ë‹¹í•¨\n\n    params.api.sizeColumnsToFit(); // ì¹¼ëŸ¼ ì‚¬ì´ì¦ˆ ìë™ì¡°ì ˆ\n  }; //=================================================== ì¶”ê°€ ========================================================\n\n\n  const addBtn = () => {\n    //newCustomerCode()\n    const newItem = NewRowData(); //ìƒˆë¡œìš´ rowë¥¼ ë³€ìˆ˜ì—ë‹´ìŒ\n\n    positionGridApi.updateRowData({\n      add: [newItem],\n      addIndex: \"\"\n    }); // agê·¸ë¦¬ë“œ apië¡œ ê·¸ë¦¬ë“œì— add í•¨\n  }; //ì¶”ê°€í•  ì»¬ëŸ¼ ì„ ì–¸\n\n\n  const NewRowData = () => {\n    positionGridApi.selectAll(); // ê·¸ë¦¬ë“œ ì „ì²´ ê°’\n\n    const rows = positionGridApi.getSelectedRows(); // ê·¸ë¦¬ë“œì˜ ëª¨ë“  ê°’ì„ ë°˜í™˜\n\n    const lastCode = JSON.stringify(rows[rows.length - 1].customerCode); // ë§ˆì§€ë§‰ customerCode ê°€ì ¸ì˜´\n\n    const subCode = Number(lastCode.substring(5, 7)) + 1; //ì˜ë¼ì„œ ìˆ«ìë§Œ +1\n\n    const newCode = \"PTN-\" + subCode; //ë¬¸ìì—´ê³¼ í•©ì³ì¤Œ\n\n    console.log(\" newCode : \" + newCode);\n    let newData = {\n      customerCode: newCode,\n      customerName: \"\",\n      customerTelNumber: \"\",\n      businessLicenseNumber: \"\",\n      customerBusinessConditions: \"\",\n      customerBusinessItems: \"\",\n      status: \"insert\"\n    };\n    return newData;\n  }; //=============================================== ìˆ˜ì • ============================================================\n  ////í¸ì§‘ í—ˆìš©ì¸ ì»¬ëŸ¼ì„ ë”ë¸” í´ë¦­í•  ë•Œ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸.\n\n\n  const rowCellChanged = e => {\n    if (e.data.status === \"insert\") {\n      return;\n    } else {\n      e.data.status = \"update\";\n    }\n  }; //=============================================== ì‚­ì œ ============================================================\n  //ì²´í¬ë°•ìŠ¤ì— ì²´í¬ëœ rowë§Œ ì‚­ì œ\n\n\n  const deleteBtn = () => {\n    const selectedData = positionGridApi.getSelectedRows(); //ì„ íƒí•œ row\n\n    console.log(\":::::::::::::::\" + JSON.stringify(selectedData.customerName));\n\n    if (selectedData.length === 0) {\n      // ì„ íƒëœê²Œ ì—†ìœ¼ë©´.\n      alert(\" ì‚­ì œí•  í•­ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš” . ğŸ™ \");\n      return;\n    }\n\n    if (!window.confirm(\"â›” \" + selectedData[0].customerName + \" ê¸ˆìœµ ê±°ë˜ì²˜ ì •ë³´ë¥¼ ì‚­ì œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ ? â›” \")) {\n      alert(\"ğŸ§¡ğŸ’›ğŸ’šğŸ’™ğŸ’œğŸ¤ğŸ–¤ğŸ¤\");\n      return;\n    } else {\n      dispatch({\n        division: \"delete\",\n        type: types.BATCH_ACCOUNT_REQUEST,\n        params: {\n          customerCode: selectedData[0].customerCode\n        }\n      });\n    }\n\n    positionGridApi.updateRowData({\n      remove: selectedData\n    }); // ì„ íƒëœ row ì‚­ì œ\n\n    alert(\"ì‚­ì œì™„ë£Œ\");\n  }; //=============================================== ì €ì¥ ============================================================\n\n\n  const saveBtn = () => {\n    positionGridApi.selectAll(); // ê·¸ë¦¬ë“œ ì „ì²´ ê°’\n\n    const rows = positionGridApi.getSelectedRows(); // ê·¸ë¦¬ë“œì˜ ëª¨ë“  ê°’ì„ ë°˜í™˜\n\n    const rowsCount = positionGridApi.getDisplayedRowCount(); // í‘œì‹œëœ ì´ í–‰ ìˆ˜ë¥¼ ë°˜í™˜\n\n    if (!window.confirm(\" ì €ì¥í•˜ì‹œê² ìŠµë‹ˆê¹Œ ? \")) {\n      alert(\"ğŸ’™ ì·¨ì†Œ ì™„ë£Œ ğŸ’™\");\n      return;\n    } else {\n      for (var i = 0; i < rowsCount; i++) {\n        delete rows[i].errorCode;\n        delete rows[i].errorMsg;\n        delete rows[i].chk;\n\n        if (rows[i].customerCode.length < 6) {\n          alert(\"ê±°ë˜ì²˜ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\n          return;\n        }\n\n        console.log(\"33333333333333  \" + JSON.stringify(data));\n      }\n\n      dispatch({\n        division: \"save\",\n        type: types.BATCH_ACCOUNT_REQUEST,\n        params: {\n          customerList: rows\n        }\n      });\n    }\n\n    alert(\"ğŸ’š ì €ì¥ì™„ë£Œ ğŸ’š\");\n    NormalAccountList(); //ì¡°íšŒ\n  };\n\n  const {\n    dark\n  } = useThemeSwitcher();\n  return React.createElement(React.Fragment, null, React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    align: \"center\",\n    className: classes.root3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: addBtn,\n    startIcon: React.createElement(Icon, {\n      className: \"fa fa-plus-circle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  }, \"\\uCD94\\uAC00\"), React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: deleteBtn,\n    startIcon: React.createElement(DeleteOutlinedIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194\n    },\n    __self: this\n  }, \"\\uC0AD\\uC81C\"), React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: saveBtn,\n    startIcon: React.createElement(ThreeSixtyIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  }, \"\\uC800\\uC7A5\")), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: dark ? \"ag-theme-alpine-dark\" : \"ag-theme-material\",\n    skipHeaderOnAutoSize: \"true\",\n    enableColResize: \"true\",\n    enableSorting: \"true\",\n    enableFilter: \"true\",\n    enableRangeSelection: \"true\",\n    rowSelection: \"multiple\",\n    rowMultiSelectWithClick: \"true\",\n    rowStyle: {\n      \"text-align\": \"center\"\n    },\n    style: {\n      height: \"550px\",\n      width: \"100%\",\n      paddingTop: \"25px\",\n      float: \"center\"\n    },\n    cellStyle: {\n      textAlign: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213\n    },\n    __self: this\n  }, React.createElement(AgGridReact, {\n    columnDefs: FinanceAccountGrid //ì •ì˜ëœ ì»¬ëŸ¼\n    ,\n    rowData: data //Reduceì—ì„œ ë°›ì•„ì˜¨ ë°ì´í„°\n    ,\n    rowSelection: \"multiple\" //í•˜ë‚˜ë§Œ ì„ íƒí•˜ê±°ë‚˜ ë³µìˆ˜ê°œë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŒ\n    ,\n    onGridReady: onGridReady //onload ì´ë²¤íŠ¸ì™€ ìœ ì‚¬í•œ ê²ƒ\n    ,\n    getRowStyle: function (param) {\n      return {\n        \"text-align\": \"center\"\n      };\n    } //body ê°€ìš´ë° ì •ë ¬\n    ,\n    onCellEditingStarted: rowCellChanged //í¸ì§‘ í—ˆìš©ì¸ ì¹¼ëŸ¼ì„ ë”ë¸” í´ë¦­í•  ë•Œ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸.\n    ,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231\n    },\n    __self: this\n  })));\n};\n\nexport default FinanceAccount;","map":{"version":3,"sources":["C:/Users/Lyn/Desktop/68REACT/68REACT/68REACT/src/erp/account/base/page/WorkplaceManagement/FinanceAccount.js"],"names":["React","useEffect","useState","AgGridReact","useStyles","axios","useDispatch","types","ThreeSixtyIcon","DeleteOutlinedIcon","Icon","Button","useThemeSwitcher","FinanceAccount","classes","data","setData","positionGridApi","setPositionGridApi","dispatch","NormalAccountList","get","then","response","catch","e","console","log","FinanceAccountGrid","checkboxSelection","rowSelection","rowMultiSelectWithClick","width","headerName","field","sortable","editable","hide","onGridReady","params","api","sizeColumnsToFit","addBtn","newItem","NewRowData","updateRowData","add","addIndex","selectAll","rows","getSelectedRows","lastCode","JSON","stringify","length","customerCode","subCode","Number","substring","newCode","newData","customerName","customerTelNumber","businessLicenseNumber","customerBusinessConditions","customerBusinessItems","status","rowCellChanged","deleteBtn","selectedData","alert","window","confirm","division","type","BATCH_ACCOUNT_REQUEST","remove","saveBtn","rowsCount","getDisplayedRowCount","i","errorCode","errorMsg","chk","customerList","dark","root3","height","paddingTop","float","textAlign","param"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { AgGridReact } from \"ag-grid-react\";\nimport useStyles from \"erp/account/statement/page/AccountLedger/Theme\"; //ê³„ì •ë³„ì›ì¥ì—ì„œ css ë•¡ê²¨ì”€\nimport axios from \"axios\";\nimport { useDispatch } from \"react-redux\";\nimport * as types from \"../../reducer/BaseReducer\";\nimport ThreeSixtyIcon from \"@material-ui/icons/ThreeSixty\";\nimport DeleteOutlinedIcon from \"@material-ui/icons/DeleteOutlined\";\nimport Icon from \"@material-ui/core/Icon\";\nimport { Button } from \"@material-ui/core\";\nimport { useThemeSwitcher } from \"mui-theme-switcher\";\n\n//=============================== 2020-09-01 ê±°ë˜ì²˜ê´€ë¦¬ ì¡°í¸ë°± ======================================\nconst FinanceAccount = () => {\n  const classes = useStyles(); //ìŠ¤íƒ€ì¼ì ìš©\n  const [data, setData] = useState(null); //useEffect ë¡œ ì¡°íšŒí•œ ê²°ê³¼ê°’ ë°›ëŠ” ìƒíƒœ ê°’\n  const [positionGridApi, setPositionGridApi] = useState(null); // ë°”ë€ŒëŠ” ìƒíƒœ ê°’ì„ ê´€ë¦¬í•¨\n  const dispatch = useDispatch(); //Redux ì €ì¥ì†Œì—ì„œ ìˆëŠ” í•¨ìˆ˜ë¥¼ ë°ë¦¬ê³ ì˜´\n\n  //===================== useEffectë¡œ ë¹„ë™ê¸°ì ìœ¼ë¡œ ë™ì‘  ====================\n\n  //ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ ëì„ ë•Œ í˜¸ì¶œë¨\n  useEffect(() => {\n    NormalAccountList(); // í•¨ìˆ˜í˜¸ì¶œ\n  }, []);\n\n  function NormalAccountList() {\n    axios\n      .get(\"http://localhost:8282/acc/base/getCustomerList\")\n      .then(response => {\n        setData(response.data);\n      })\n      .catch(e => {\n        console.log(e);\n      });\n  }\n\n  //=============================== ag_grid ì‹œì‘ ======================================\n\n  const FinanceAccountGrid = [\n    // ì¹¼ëŸ¼ì •ì˜\n    {\n      checkboxSelection: true,\n      rowSelection: \"multiple\",\n      rowMultiSelectWithClick: true,\n      width: \"80\",\n    },\n    { headerName: \"ê¸ˆìœµ ê±°ë˜ì²˜ì½”ë“œ\", field: \"customerCode\", sortable: true }, // sortable ì»¬ëŸ¼ëˆŒëŸ¬ì„œ ì˜¤ë¦„ì°¨ìˆœë‚´ë¦¼ì°¨ìˆœ ê°€ëŠ¥\n    { headerName: \"ì‚¬ì—…ì¥ì½”ë“œ\", field: \"workplaceCode\", editable: true },\n    {\n      headerName: \"ê¸ˆìœµê¸°ê´€ì½”ë“œ\",\n      field: \"financiaLInstituteCode\",\n      editable: true,\n    },\n    {\n      headerName: \"ê¸ˆìœµê¸°ê´€ëª…\",\n      field: \"financialInstituteName\",\n      editable: true,\n    },\n    { headerName: \"ê¸ˆìœµê±°ë˜ì²˜ëª…\", field: \"customerName\", editable: true },\n    { headerName: \"ê³„ì¢Œë²ˆí˜¸\", field: \"accountNumber\", editable: true },\n    { headerName: \"ìœ í˜•\", field: \"customerType\", editable: true },\n    { headerName: \"ìƒíƒœ\", field: \"status\", hide: true },\n  ];\n  /* \n     customerCode; ê±°ë˜ì²˜ì½”ë“œ /  workplaceCode; ì‚¬ì—…ì¥ì½”ë“œ /  customerName; ê±°ë˜ì²˜ëª… /  customerType; ê±°ë˜ì²˜ìœ í˜• /  customerCeo; ëŒ€í‘œì /  businessLicenseNumber; ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸\n     / socialSecurityNumber; ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸ / customerBusinessConditions; ì—…íƒœ / customerBusinessItems; ì¢…ëª© / customerZipCode; ê±°ë˜ì²˜ìš°í¸ë²ˆí˜¸ / customerBasicAddress; ê±°ë˜ì²˜ê¸°ë³¸ì£¼ì†Œ\n     customerDetailAddress; ê±°ë˜ì²˜ì„¸ë¶€ì£¼ì†Œ / customerTelNumber; ê±°ë˜ì²˜ì „í™”ë²ˆí˜¸ / customerFaxNumber; ê±°ë˜ì²˜íŒ©ìŠ¤ë²ˆí˜¸ / customerNote; ë¹„ê³  / accountNumber; ê³„ì¢Œë²ˆí˜¸ /  cardNumber; ì¹´ë“œë²ˆí˜¸\n     cardType; ì¹´ë“œêµ¬ë¶„ / cardMemberName; ì¹´ë“œíšŒì›ëª… / cardOpenPlace; ì¹´ë“œê°€ë§¹ì ë²ˆí˜¸ / financialInstituteCode; ê¸ˆìœµê¸°ê´€ì½”ë“œ / financialInstituteName; ê¸ˆìœµê¸°ê´€ëª…\n     */\n\n  //=================================================== ag Grid ì´ˆê¸°í™” ì‹œ ì‹¤í–‰ =========================================\n  const onGridReady = params => {\n    setPositionGridApi(params.api); //ì¶”ê°€ ìˆ˜ì • ì‚­ì œ ë²„íŠ¼ëˆ„ë¥¼ë•Œ ê·¸ë¦¬ë“œ ê°’ ì‚¬ìš©í•˜ë ¤ê³  í• ë‹¹í•¨\n\n    params.api.sizeColumnsToFit(); // ì¹¼ëŸ¼ ì‚¬ì´ì¦ˆ ìë™ì¡°ì ˆ\n  };\n\n  //=================================================== ì¶”ê°€ ========================================================\n\n  const addBtn = () => {\n    //newCustomerCode()\n    const newItem = NewRowData(); //ìƒˆë¡œìš´ rowë¥¼ ë³€ìˆ˜ì—ë‹´ìŒ\n    positionGridApi.updateRowData({ add: [newItem], addIndex: \"\" }); // agê·¸ë¦¬ë“œ apië¡œ ê·¸ë¦¬ë“œì— add í•¨\n  };\n  //ì¶”ê°€í•  ì»¬ëŸ¼ ì„ ì–¸\n  const NewRowData = () => {\n    positionGridApi.selectAll(); // ê·¸ë¦¬ë“œ ì „ì²´ ê°’\n    const rows = positionGridApi.getSelectedRows(); // ê·¸ë¦¬ë“œì˜ ëª¨ë“  ê°’ì„ ë°˜í™˜\n    const lastCode = JSON.stringify(rows[rows.length - 1].customerCode); // ë§ˆì§€ë§‰ customerCode ê°€ì ¸ì˜´\n    const subCode = Number(lastCode.substring(5, 7)) + 1; //ì˜ë¼ì„œ ìˆ«ìë§Œ +1\n    const newCode = \"PTN-\" + subCode; //ë¬¸ìì—´ê³¼ í•©ì³ì¤Œ\n    console.log(\" newCode : \" + newCode);\n\n    let newData = {\n      customerCode: newCode,\n      customerName: \"\",\n      customerTelNumber: \"\",\n      businessLicenseNumber: \"\",\n      customerBusinessConditions: \"\",\n      customerBusinessItems: \"\",\n      status: \"insert\",\n    };\n    return newData;\n  };\n\n  //=============================================== ìˆ˜ì • ============================================================\n\n  ////í¸ì§‘ í—ˆìš©ì¸ ì»¬ëŸ¼ì„ ë”ë¸” í´ë¦­í•  ë•Œ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸.\n  const rowCellChanged = e => {\n    if (e.data.status === \"insert\") {\n      return;\n    } else {\n      e.data.status = \"update\";\n    }\n  };\n\n  //=============================================== ì‚­ì œ ============================================================\n\n  //ì²´í¬ë°•ìŠ¤ì— ì²´í¬ëœ rowë§Œ ì‚­ì œ\n  const deleteBtn = () => {\n    const selectedData = positionGridApi.getSelectedRows(); //ì„ íƒí•œ row\n    console.log(\":::::::::::::::\" + JSON.stringify(selectedData.customerName));\n    if (selectedData.length === 0) {\n      // ì„ íƒëœê²Œ ì—†ìœ¼ë©´.\n      alert(\" ì‚­ì œí•  í•­ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš” . ğŸ™ \");\n      return;\n    }\n    if (\n      !window.confirm(\n        \"â›” \" +\n          selectedData[0].customerName +\n          \" ê¸ˆìœµ ê±°ë˜ì²˜ ì •ë³´ë¥¼ ì‚­ì œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ ? â›” \",\n      )\n    ) {\n      alert(\"ğŸ§¡ğŸ’›ğŸ’šğŸ’™ğŸ’œğŸ¤ğŸ–¤ğŸ¤\");\n      return;\n    } else {\n      dispatch({\n        division: \"delete\",\n        type: types.BATCH_ACCOUNT_REQUEST,\n        params: { customerCode: selectedData[0].customerCode },\n      });\n    }\n    positionGridApi.updateRowData({ remove: selectedData }); // ì„ íƒëœ row ì‚­ì œ\n    alert(\"ì‚­ì œì™„ë£Œ\");\n  };\n\n  //=============================================== ì €ì¥ ============================================================\n\n  const saveBtn = () => {\n    positionGridApi.selectAll(); // ê·¸ë¦¬ë“œ ì „ì²´ ê°’\n    const rows = positionGridApi.getSelectedRows(); // ê·¸ë¦¬ë“œì˜ ëª¨ë“  ê°’ì„ ë°˜í™˜\n    const rowsCount = positionGridApi.getDisplayedRowCount(); // í‘œì‹œëœ ì´ í–‰ ìˆ˜ë¥¼ ë°˜í™˜\n\n    if (!window.confirm(\" ì €ì¥í•˜ì‹œê² ìŠµë‹ˆê¹Œ ? \")) {\n      alert(\"ğŸ’™ ì·¨ì†Œ ì™„ë£Œ ğŸ’™\");\n      return;\n    } else {\n      for (var i = 0; i < rowsCount; i++) {\n        delete rows[i].errorCode;\n        delete rows[i].errorMsg;\n        delete rows[i].chk;\n        if (rows[i].customerCode.length < 6) {\n          alert(\"ê±°ë˜ì²˜ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\n          return;\n        }\n        console.log(\"33333333333333  \" + JSON.stringify(data));\n      }\n      dispatch({\n        division: \"save\",\n        type: types.BATCH_ACCOUNT_REQUEST,\n        params: { customerList: rows },\n      });\n    }\n    alert(\"ğŸ’š ì €ì¥ì™„ë£Œ ğŸ’š\");\n    NormalAccountList(); //ì¡°íšŒ\n  };\n\n  const { dark } = useThemeSwitcher();\n\n  return (\n    <>\n      <br />\n      <div align=\"center\" className={classes.root3}>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={addBtn}\n          startIcon={<Icon className=\"fa fa-plus-circle\" />}\n        >\n          ì¶”ê°€\n        </Button>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={deleteBtn}\n          startIcon={<DeleteOutlinedIcon />}\n        >\n          ì‚­ì œ\n        </Button>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={saveBtn}\n          startIcon={<ThreeSixtyIcon />}\n        >\n          ì €ì¥\n        </Button>\n      </div>\n      <br />\n      <br />\n      <div\n        className={dark ? \"ag-theme-alpine-dark\" : \"ag-theme-material\"}\n        skipHeaderOnAutoSize=\"true\"\n        enableColResize=\"true\"\n        enableSorting=\"true\"\n        enableFilter=\"true\"\n        enableRangeSelection=\"true\"\n        rowSelection=\"multiple\"\n        rowMultiSelectWithClick=\"true\"\n        rowStyle={{ \"text-align\": \"center\" }}\n        style={{\n          height: \"550px\",\n          width: \"100%\",\n          paddingTop: \"25px\",\n          float: \"center\",\n        }}\n        cellStyle={{ textAlign: \"center\" }}\n      >\n        <AgGridReact\n          columnDefs={FinanceAccountGrid} //ì •ì˜ëœ ì»¬ëŸ¼\n          rowData={data} //Reduceì—ì„œ ë°›ì•„ì˜¨ ë°ì´í„°\n          rowSelection=\"multiple\" //í•˜ë‚˜ë§Œ ì„ íƒí•˜ê±°ë‚˜ ë³µìˆ˜ê°œë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŒ\n          onGridReady={onGridReady} //onload ì´ë²¤íŠ¸ì™€ ìœ ì‚¬í•œ ê²ƒ\n          getRowStyle={function(param) {\n            return { \"text-align\": \"center\" };\n          }} //body ê°€ìš´ë° ì •ë ¬\n          onCellEditingStarted={rowCellChanged} //í¸ì§‘ í—ˆìš©ì¸ ì¹¼ëŸ¼ì„ ë”ë¸” í´ë¦­í•  ë•Œ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸.\n        />\n      </div>\n    </>\n  );\n};\n\nexport default FinanceAccount;\n"]},"metadata":{},"sourceType":"module"}